<mxfile host="65bd71144e">
    <diagram id="remote-mcp-architecture" name="MCPFeeder RSS Aggregation Architecture">
        <mxGraphModel dx="450" dy="496" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="900" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <!-- Title -->
                <mxCell id="title" value="MCPFeeder: Remote MCP Server for RSS Feed Processing" style="text;html=1;align=center;verticalAlign=middle;fontSize=16;fontStyle=1;fillColor=none;strokeColor=none;" parent="1" vertex="1">
                    <mxGeometry x="40" y="10" width="900" height="30" as="geometry"/>
                </mxCell>
                <!-- MCP Clients -->
                <mxCell id="client-container" value="MCP Clients" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;startSize=30;fontSize=14;fontStyle=1;swimlaneFillColor=#F5F5F5;" parent="1" vertex="1">
                    <mxGeometry x="40" y="60" width="180" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="vscode-client" value="VS Code &amp; Copilot" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="client-container" vertex="1">
                    <mxGeometry x="20" y="50" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="mcp-inspector" value="MCP Inspector" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="client-container" vertex="1">
                    <mxGeometry x="20" y="130" width="140" height="60" as="geometry"/>
                </mxCell>
                <!-- Connection arrow from clients to Azure Functions -->
                <mxCell id="client-to-function" value="HTTPS&lt;br&gt;GET_FEEDS TOOL" style="endArrow=classic;html=1;rounded=0;fontSize=11;fontStyle=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.4;entryDx=0;entryDy=0;" parent="1" source="client-container" target="11" edge="1">
                    <mxGeometry y="30" width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="220" y="170" as="sourcePoint"/>
                        <mxPoint x="310" y="280" as="targetPoint"/>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <!-- Azure Function App Container -->
                <mxCell id="11" value="Azure Function App (.NET 8 Isolated)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;startSize=30;fontSize=14;fontStyle=1;swimlaneFillColor=#f5f5f5;" parent="1" vertex="1">
                    <mxGeometry x="290" y="60" width="650" height="620" as="geometry"/>
                </mxCell>
                <!-- MCP Server Layer -->
                <mxCell id="mcp-server" value="MCP Server Protocol Handler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=12;" parent="11" vertex="1">
                    <mxGeometry x="20" y="50" width="610" height="50" as="geometry"/>
                </mxCell>
                <!-- MCP Tools Container -->
                <mxCell id="12" value="MCP Tools (get_feeds)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;startSize=30;fontSize=13;fontStyle=1;" parent="11" vertex="1">
                    <mxGeometry x="20" y="120" width="610" height="130" as="geometry"/>
                </mxCell>
                <!-- FeederTool -->
                <mxCell id="feeder-tool" value="&lt;b&gt;get_feeds&lt;/b&gt;&lt;br&gt;RSS Feed Aggregator&lt;br&gt;&lt;br&gt;• Fetches RSS feeds by URL&lt;br&gt;• Filters last 24 hours&lt;br&gt;• Parses & cleans content&lt;br&gt;• Handles errors gracefully" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=10;verticalAlign=top;" parent="12" vertex="1">
                    <mxGeometry x="20" y="40" width="570" height="70" as="geometry"/>
                </mxCell>
                <!-- Services Container -->
                <mxCell id="services-container" value="Business Services" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f0d4e8;strokeColor=#b384a0;startSize=30;fontSize=13;fontStyle=1;" parent="11" vertex="1">
                    <mxGeometry x="20" y="270" width="610" height="180" as="geometry"/>
                </mxCell>
                <!-- FeedService -->
                <mxCell id="feed-service" value="&lt;b&gt;FeedService&lt;/b&gt;&lt;br&gt;&lt;br&gt;• GetFeedsAsync(url, start, end)&lt;br&gt;• RSS XML parsing&lt;br&gt;• Date range filtering&lt;br&gt;• HTML entity decoding&lt;br&gt;• Error handling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6e6;strokeColor=#cc0000;align=left;fontSize=10;verticalAlign=top;" parent="services-container" vertex="1">
                    <mxGeometry x="20" y="40" width="280" height="120" as="geometry"/>
                </mxCell>
                <!-- Memory Cache -->
                <mxCell id="memory-cache" value="&lt;b&gt;Memory Cache&lt;/b&gt;&lt;br&gt;&lt;br&gt;• 24-hour TTL&lt;br&gt;• Key: url_startDate_endDate&lt;br&gt;• Hit rate optimization&lt;br&gt;• Reduces HTTP calls" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ccffff;strokeColor=#00cccc;align=left;fontSize=10;verticalAlign=top;" parent="services-container" vertex="1">
                    <mxGeometry x="310" y="40" width="280" height="120" as="geometry"/>
                </mxCell>
                <!-- Connectors within Azure Functions -->
                <mxCell id="server-to-tool" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="11" source="mcp-server" target="12" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="tool-to-service" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="11" source="12" target="services-container" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <!-- Dependency Injection Arrow -->
                <mxCell id="di-arrow" value="Dependency&lt;br&gt;Injection" style="endArrow=classic;html=1;rounded=0;fontSize=10;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="11" source="feed-service" target="memory-cache" edge="1">
                    <mxGeometry y="30" width="50" height="50" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <!-- External Services -->
                <mxCell id="external-container" value="External Data Sources" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e8f4f8;strokeColor=#046b7c;startSize=30;fontSize=13;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="290" y="700" width="650" height="120" as="geometry"/>
                </mxCell>
                <!-- RSS Feed Sources -->
                <mxCell id="rss-feeds" value="&lt;b&gt;Remote RSS Feeds&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Bloomberg&lt;br&gt;• ArsTechnica&lt;br&gt;• BBC News&lt;br&gt;• Hacker News&lt;br&gt;• Custom URLs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#333333;align=left;fontSize=10;verticalAlign=top;" parent="external-container" vertex="1">
                    <mxGeometry x="20" y="35" width="610" height="75" as="geometry"/>
                </mxCell>
                <!-- Connection from Services to External -->
                <mxCell id="service-to-external" value="HTTP GET&lt;br&gt;(15s timeout)" style="endArrow=classic;html=1;rounded=0;fontSize=10;fontStyle=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="11" target="external-container" edge="1">
                    <mxGeometry y="30" width="50" height="50" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <!-- Data Flow Legend -->
                <mxCell id="legend" value="&lt;b&gt;Data Flow:&lt;/b&gt;&lt;br&gt;1. Client sends tool invocation to /runtime/webhooks/mcp&lt;br&gt;2. MCP Server routes to get_feeds tool&lt;br&gt;3. FeederTool validates URL and calculates date range&lt;br&gt;4. FeedService checks memory cache (24hr TTL)&lt;br&gt;5. Cache miss: HTTP GET to RSS feed URL&lt;br&gt;6. XML parsing, date filtering, HTML cleanup&lt;br&gt;7. Results cached and returned as formatted text&lt;br&gt;8. Response delivered back to MCP client" style="text;html=1;align=left;verticalAlign=top;fontSize=9;fillColor=#ffffcc;strokeColor=#999999;" parent="1" vertex="1">
                    <mxGeometry x="40" y="500" width="900" height="150" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>